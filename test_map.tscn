[gd_scene load_steps=31 format=4 uid="uid://5coeftq8y7uo"]

[ext_resource type="Texture2D" uid="uid://bu5pirijx0q5h" path="res://awdor_plains.png" id="1_4wuf8"]
[ext_resource type="Script" uid="uid://bluntvvp4ts82" path="res://map.gd" id="1_s02eq"]
[ext_resource type="Texture2D" uid="uid://dd8xg8833lgbx" path="res://awdor_mountains.png" id="2_s02eq"]
[ext_resource type="Texture2D" uid="uid://cidw21sfbn6om" path="res://awdor_base.png" id="4_t8dge"]
[ext_resource type="Texture2D" uid="uid://4t355ggvpvqo" path="res://awdor_city.png" id="5_qgarv"]
[ext_resource type="Texture2D" uid="uid://2f5wg0hptcb4" path="res://Sprites/SpawnCave.png" id="5_yobqo"]
[ext_resource type="Texture2D" uid="uid://bj6kji8hyfwnw" path="res://Sprites/jeffmmax1_png/JeffmMax-2.png" id="6_dj26u"]
[ext_resource type="PackedScene" uid="uid://bgnpjjtap6jfa" path="res://test_map_assets/enemy.tscn" id="6_r0pc2"]
[ext_resource type="PackedScene" uid="uid://defiek2tefue8" path="res://game_over_menu.tscn" id="8_bu3ac"]
[ext_resource type="PackedScene" uid="uid://bwk65i23xc5ad" path="res://pause_menu.tscn" id="8_gqtbx"]
[ext_resource type="Script" uid="uid://d3p15sv5lykwc" path="res://HUD.gd" id="9_bu3ac"]
[ext_resource type="AudioStream" uid="uid://dqq6mgj6jl8jd" path="res://Sound/DefendTheMax.mp3" id="12_dj26u"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_t8dge"]
texture = ExtResource("1_4wuf8")
separation = Vector2i(1, 1)
texture_region_size = Vector2i(24, 24)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0

[sub_resource type="TileSet" id="TileSet_qgarv"]
tile_size = Vector2i(24, 24)
sources/0 = SubResource("TileSetAtlasSource_t8dge")

[sub_resource type="TileMapPattern" id="TileMapPattern_r0pc2"]
tile_data = PackedInt32Array(0, 0, 0, 65536, 0, 1)

[sub_resource type="TileMapPattern" id="TileMapPattern_ssfg1"]
tile_data = PackedInt32Array(0, 65536, 0, 65536, 65536, 1)

[sub_resource type="TileMapPattern" id="TileMapPattern_gqtbx"]
tile_data = PackedInt32Array(0, 131072, 0, 65536, 131072, 1)

[sub_resource type="TileMapPattern" id="TileMapPattern_bu3ac"]
tile_data = PackedInt32Array(0, 196608, 0, 65536, 196608, 1)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_5354r"]
texture = ExtResource("2_s02eq")
separation = Vector2i(1, 0)
texture_region_size = Vector2i(24, 24)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
0:1/0 = 0
0:1/0/custom_data_0 = true
1:1/0 = 0
1:1/0/custom_data_0 = true
2:1/0 = 0
2:1/0/custom_data_0 = true
3:1/0 = 0
3:1/0/custom_data_0 = true

[sub_resource type="TileSet" id="TileSet_yobqo"]
tile_size = Vector2i(24, 24)
custom_data_layer_0/name = "Obstacle"
custom_data_layer_0/type = 1
sources/0 = SubResource("TileSetAtlasSource_5354r")
pattern_0 = SubResource("TileMapPattern_r0pc2")
pattern_1 = SubResource("TileMapPattern_ssfg1")
pattern_2 = SubResource("TileMapPattern_gqtbx")
pattern_3 = SubResource("TileMapPattern_bu3ac")

[sub_resource type="TileMapPattern" id="TileMapPattern_t8dge"]
tile_data = PackedInt32Array(0, 2, 0, 65536, 2, 1)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_1wgsg"]
texture = ExtResource("5_yobqo")
texture_region_size = Vector2i(24, 24)
0:0/0 = 0
0:0/0/custom_data_1 = true

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_ihcqn"]
texture = ExtResource("6_dj26u")
texture_region_size = Vector2i(24, 24)
0:0/0 = 0
0:0/0/custom_data_0 = true

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_qgarv"]
texture = ExtResource("4_t8dge")
texture_region_size = Vector2i(24, 24)
0:1/animation_frame_0/duration = 1.0
0:1/animation_frame_1/duration = 1.0
0:1/0 = 0
0:1/0/custom_data_0 = true
0:0/animation_frame_0/duration = 1.0
0:0/animation_frame_1/duration = 1.0
0:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_yobqo"]
texture = ExtResource("5_qgarv")
texture_region_size = Vector2i(24, 24)
0:1/animation_frame_0/duration = 1.0
0:1/animation_frame_1/duration = 1.0
0:1/0 = 0
0:1/0/custom_data_1 = true
0:0/animation_frame_0/duration = 1.0
0:0/animation_frame_1/duration = 1.0
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_r0pc2"]
tile_size = Vector2i(24, 24)
custom_data_layer_0/name = "Base"
custom_data_layer_0/type = 1
custom_data_layer_1/name = "City"
custom_data_layer_1/type = 1
sources/2 = SubResource("TileSetAtlasSource_qgarv")
sources/3 = SubResource("TileSetAtlasSource_yobqo")
sources/0 = SubResource("TileSetAtlasSource_1wgsg")
sources/1 = SubResource("TileSetAtlasSource_ihcqn")
pattern_0 = SubResource("TileMapPattern_t8dge")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ssfg1"]

[sub_resource type="Theme" id="Theme_5354r"]

[sub_resource type="FontFile" id="FontFile_yobqo"]
cache/0/16/0/ascent = 0.0
cache/0/16/0/descent = 0.0
cache/0/16/0/underline_position = 0.0
cache/0/16/0/underline_thickness = 0.0
cache/0/16/0/scale = 1.0
cache/0/17/0/ascent = 0.0
cache/0/17/0/descent = 0.0
cache/0/17/0/underline_position = 0.0
cache/0/17/0/underline_thickness = 0.0
cache/0/17/0/scale = 1.0
cache/0/18/0/ascent = 0.0
cache/0/18/0/descent = 0.0
cache/0/18/0/underline_position = 0.0
cache/0/18/0/underline_thickness = 0.0
cache/0/18/0/scale = 1.0
cache/0/19/0/ascent = 0.0
cache/0/19/0/descent = 0.0
cache/0/19/0/underline_position = 0.0
cache/0/19/0/underline_thickness = 0.0
cache/0/19/0/scale = 1.0
cache/0/20/0/ascent = 0.0
cache/0/20/0/descent = 0.0
cache/0/20/0/underline_position = 0.0
cache/0/20/0/underline_thickness = 0.0
cache/0/20/0/scale = 1.0
cache/0/21/0/ascent = 0.0
cache/0/21/0/descent = 0.0
cache/0/21/0/underline_position = 0.0
cache/0/21/0/underline_thickness = 0.0
cache/0/21/0/scale = 1.0
cache/0/22/0/ascent = 0.0
cache/0/22/0/descent = 0.0
cache/0/22/0/underline_position = 0.0
cache/0/22/0/underline_thickness = 0.0
cache/0/22/0/scale = 1.0
cache/0/23/0/ascent = 0.0
cache/0/23/0/descent = 0.0
cache/0/23/0/underline_position = 0.0
cache/0/23/0/underline_thickness = 0.0
cache/0/23/0/scale = 1.0
cache/0/24/0/ascent = 0.0
cache/0/24/0/descent = 0.0
cache/0/24/0/underline_position = 0.0
cache/0/24/0/underline_thickness = 0.0
cache/0/24/0/scale = 1.0
cache/0/25/0/ascent = 0.0
cache/0/25/0/descent = 0.0
cache/0/25/0/underline_position = 0.0
cache/0/25/0/underline_thickness = 0.0
cache/0/25/0/scale = 1.0
cache/0/26/0/ascent = 0.0
cache/0/26/0/descent = 0.0
cache/0/26/0/underline_position = 0.0
cache/0/26/0/underline_thickness = 0.0
cache/0/26/0/scale = 1.0
cache/0/27/0/ascent = 0.0
cache/0/27/0/descent = 0.0
cache/0/27/0/underline_position = 0.0
cache/0/27/0/underline_thickness = 0.0
cache/0/27/0/scale = 1.0
cache/0/28/0/ascent = 0.0
cache/0/28/0/descent = 0.0
cache/0/28/0/underline_position = 0.0
cache/0/28/0/underline_thickness = 0.0
cache/0/28/0/scale = 1.0
cache/0/29/0/ascent = 0.0
cache/0/29/0/descent = 0.0
cache/0/29/0/underline_position = 0.0
cache/0/29/0/underline_thickness = 0.0
cache/0/29/0/scale = 1.0
cache/0/30/0/ascent = 0.0
cache/0/30/0/descent = 0.0
cache/0/30/0/underline_position = 0.0
cache/0/30/0/underline_thickness = 0.0
cache/0/30/0/scale = 1.0
cache/0/31/0/ascent = 0.0
cache/0/31/0/descent = 0.0
cache/0/31/0/underline_position = 0.0
cache/0/31/0/underline_thickness = 0.0
cache/0/31/0/scale = 1.0
cache/0/32/0/ascent = 0.0
cache/0/32/0/descent = 0.0
cache/0/32/0/underline_position = 0.0
cache/0/32/0/underline_thickness = 0.0
cache/0/32/0/scale = 1.0
cache/0/33/0/ascent = 0.0
cache/0/33/0/descent = 0.0
cache/0/33/0/underline_position = 0.0
cache/0/33/0/underline_thickness = 0.0
cache/0/33/0/scale = 1.0
cache/0/34/0/ascent = 0.0
cache/0/34/0/descent = 0.0
cache/0/34/0/underline_position = 0.0
cache/0/34/0/underline_thickness = 0.0
cache/0/34/0/scale = 1.0
cache/0/35/0/ascent = 0.0
cache/0/35/0/descent = 0.0
cache/0/35/0/underline_position = 0.0
cache/0/35/0/underline_thickness = 0.0
cache/0/35/0/scale = 1.0
cache/0/36/0/ascent = 0.0
cache/0/36/0/descent = 0.0
cache/0/36/0/underline_position = 0.0
cache/0/36/0/underline_thickness = 0.0
cache/0/36/0/scale = 1.0
cache/0/37/0/ascent = 0.0
cache/0/37/0/descent = 0.0
cache/0/37/0/underline_position = 0.0
cache/0/37/0/underline_thickness = 0.0
cache/0/37/0/scale = 1.0
cache/0/38/0/ascent = 0.0
cache/0/38/0/descent = 0.0
cache/0/38/0/underline_position = 0.0
cache/0/38/0/underline_thickness = 0.0
cache/0/38/0/scale = 1.0
cache/0/39/0/ascent = 0.0
cache/0/39/0/descent = 0.0
cache/0/39/0/underline_position = 0.0
cache/0/39/0/underline_thickness = 0.0
cache/0/39/0/scale = 1.0
cache/0/40/0/ascent = 0.0
cache/0/40/0/descent = 0.0
cache/0/40/0/underline_position = 0.0
cache/0/40/0/underline_thickness = 0.0
cache/0/40/0/scale = 1.0
cache/0/41/0/ascent = 0.0
cache/0/41/0/descent = 0.0
cache/0/41/0/underline_position = 0.0
cache/0/41/0/underline_thickness = 0.0
cache/0/41/0/scale = 1.0
cache/0/42/0/ascent = 0.0
cache/0/42/0/descent = 0.0
cache/0/42/0/underline_position = 0.0
cache/0/42/0/underline_thickness = 0.0
cache/0/42/0/scale = 1.0
cache/0/43/0/ascent = 0.0
cache/0/43/0/descent = 0.0
cache/0/43/0/underline_position = 0.0
cache/0/43/0/underline_thickness = 0.0
cache/0/43/0/scale = 1.0
cache/0/44/0/ascent = 0.0
cache/0/44/0/descent = 0.0
cache/0/44/0/underline_position = 0.0
cache/0/44/0/underline_thickness = 0.0
cache/0/44/0/scale = 1.0

[sub_resource type="LabelSettings" id="LabelSettings_dj26u"]
font = SubResource("FontFile_yobqo")
font_size = 44
outline_size = 7
outline_color = Color(0, 0, 0, 1)

[node name="test_map" type="Node2D"]

[node name="map_holder" type="Node2D" parent="."]
script = ExtResource("1_s02eq")
enemy_scene = ExtResource("6_r0pc2")

[node name="base_layer" type="TileMapLayer" parent="map_holder"]
texture_filter = 1
tile_map_data = PackedByteArray("AAAAAP//AAAAAAAAAAABAP7/AAAAAAAAAAACAP3/AAAAAAAAAAACAP//AAAAAAAAAAADAP7/AAAAAAAAAAD///7/AAAAAAAAAAAAAP7/AAABAAAAAAABAP3/AAABAAAAAAADAP//AAABAAAAAAD/////AAABAAEAAAAAAP3/AAAEAAAAAAACAP7/AAACAAEAAAAEAP3/AAACAAEAAAAEAP7/AAADAAEAAAAEAP//AAADAAEAAAADAP3/AAACAAAAAAABAP//AAABAAAAAAD///3/AAABAAAAAAD+/wAAAAAAAAEAAAAAAAEAAAABAAAAAAABAAAAAAABAAAAAAACAAEAAAAAAAAAAAADAAAAAAACAAAAAAAFAAAAAAABAAAAAAAFAP//AAAAAAAAAAAGAP//AAAAAAAAAAAGAP3/AAAAAAAAAAAHAP3/AAAAAAAAAAAHAPv/AAAAAAAAAAAGAPv/AAACAAAAAAAFAPv/AAABAAAAAAAEAPv/AAADAAEAAAADAPv/AAAAAAAAAAAAAPv/AAAAAAAAAAD///v/AAABAAAAAAD+//v/AAAAAAAAAAD9//v/AAAAAAAAAAD8//v/AAADAAEAAAD8//z/AAABAAAAAAD8//3/AAAAAAEAAAD8//7/AAAAAAAAAAD8////AAABAAAAAAD8/wAAAAAAAAAAAAD8/wEAAAAAAAAAAAD9/wEAAAADAAEAAAD+/wEAAAABAAAAAAD//wEAAAAAAAAAAAABAAEAAAAAAAAAAAADAAEAAAAAAAAAAAAEAAEAAAABAAAAAAAFAAEAAAAAAAAAAAAGAAEAAAAAAAAAAAAHAAEAAAAEAAAAAAAIAAEAAAAAAAAAAAAJAAEAAAABAAAAAAAJAAAAAAAAAAAAAAAJAP//AAAAAAAAAAAJAP7/AAABAAAAAAAJAP3/AAAAAAAAAAAJAPz/AAAAAAAAAAAJAPv/AAAAAAAAAAAJAPr/AAABAAAAAAAIAPr/AAAAAAAAAAAHAPr/AAAAAAAAAAAGAPr/AAAAAAAAAAAFAPr/AAAAAAAAAAAEAPr/AAAAAAAAAAADAPr/AAABAAAAAAACAPr/AAAAAAAAAAABAPr/AAACAAAAAAAAAPr/AAAAAAAAAAD///r/AAAAAAAAAAD+//r/AAAAAAEAAAD9//r/AAAAAAAAAAD8//r/AAAAAAAAAAD7//r/AAAAAAAAAAD7//v/AAAAAAAAAAD7//z/AAAAAAAAAAD7//3/AAAAAAAAAAD7//7/AAAAAAAAAAD7////AAAAAAAAAAD7/wAAAAAAAAAAAAD7/wEAAAABAAAAAAD9//z/AAAAAAAAAAD9//3/AAABAAAAAAD9//7/AAAAAAAAAAD9////AAACAAAAAAD9/wAAAAAAAAAAAAD+////AAAAAAAAAAD+//7/AAAAAAAAAAD+//3/AAAAAAAAAAD+//z/AAAAAAAAAAD///z/AAAAAAAAAAAAAPz/AAADAAEAAAABAPz/AAAAAAAAAAABAPv/AAAAAAAAAAACAPv/AAAAAAAAAAACAPz/AAAAAAAAAAADAPz/AAAAAAAAAAAEAPz/AAAAAAAAAAAFAPz/AAAAAAAAAAAFAP3/AAAAAAAAAAAFAP7/AAAAAAEAAAAGAP7/AAAAAAAAAAAHAP7/AAABAAAAAAAHAPz/AAABAAAAAAAGAPz/AAAAAAAAAAAIAPz/AAAAAAAAAAAIAPv/AAAAAAEAAAAIAP3/AAAAAAAAAAAIAP//AAAEAAAAAAAIAAAAAAAAAAAAAAAHAAAAAAABAAAAAAAGAAAAAAAAAAAAAAAHAP//AAAAAAAAAAAIAP7/AAAAAAAAAAAEAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAA=")
tile_set = SubResource("TileSet_qgarv")

[node name="terrain_layer" type="TileMapLayer" parent="map_holder"]
texture_filter = 1
tile_map_data = PackedByteArray("AAAAAP7/AAAAAAAAAAAAAP//AAAAAAEAAAABAP7/AAABAAAAAAABAP//AAABAAEAAAAEAP7/AAADAAAAAAAEAP//AAADAAEAAAACAP7/AAACAAAAAAACAP//AAACAAEAAAD7//r/AAAAAAAAAAD7//v/AAAAAAEAAAD8//v/AAABAAEAAAD8//r/AAABAAAAAAD9//r/AAABAAAAAAD9//v/AAABAAEAAAD+//r/AAACAAAAAAD+//v/AAACAAEAAAD7/wAAAAADAAAAAAD7/wEAAAADAAEAAAAJAAAAAAADAAAAAAAJAAEAAAADAAEAAAAJAP3/AAADAAAAAAAJAP7/AAADAAEAAAAHAPv/AAADAAAAAAAHAPz/AAADAAEAAAADAPv/AAADAAEAAAD9//3/AAADAAAAAAD9//7/AAADAAEAAAD+/wAAAAADAAAAAAD+/wEAAAADAAEAAAAGAAAAAAADAAAAAAAGAAEAAAADAAEAAAAIAPv/AAADAAEAAAAIAPz/AAADAAEAAAAIAPr/AAADAAEAAAAIAPn/AAADAAAAAAAIAP3/AAADAAAAAAAIAP7/AAADAAEAAAAHAP3/AAADAAAAAAAHAP7/AAADAAEAAAAGAP3/AAADAAAAAAAGAP7/AAADAAEAAAAFAP3/AAADAAEAAAAFAP7/AAADAAEAAAAFAPz/AAADAAEAAAAFAPv/AAADAAEAAAAEAPv/AAADAAEAAAACAPv/AAADAAEAAAAFAPr/AAADAAAAAAAEAPr/AAADAAAAAAADAPr/AAADAAAAAAACAPr/AAADAAAAAAABAPr/AAADAAAAAAABAPv/AAADAAEAAAAAAPr/AAADAAAAAAAAAPv/AAADAAEAAAD///7/AAADAAAAAAD/////AAADAAEAAAADAPz/AAADAAAAAAADAP3/AAADAAEAAAACAPz/AAADAAAAAAACAP3/AAADAAEAAAAAAPz/AAADAAEAAAAAAP3/AAADAAEAAAA=")
tile_set = SubResource("TileSet_yobqo")

[node name="building_layer" type="TileMapLayer" parent="map_holder"]
texture_filter = 1
tile_map_data = PackedByteArray("AAAJAPr/AAAAAAAAAAADAP//AQAAAAAAAAA=")
tile_set = SubResource("TileSet_r0pc2")

[node name="SpawnTimer" type="Timer" parent="map_holder"]
wait_time = 3.0
autostart = true

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(60, -50)
zoom = Vector2(3, 3)

[node name="PauseMenu" parent="." instance=ExtResource("8_gqtbx")]

[node name="GameOverTrigger" type="Area2D" parent="."]
position = Vector2(84, -12)
scale = Vector2(0.66252536, 0.64901793)

[node name="CollisionShape2D" type="CollisionShape2D" parent="GameOverTrigger"]
visible = false
shape = SubResource("RectangleShape2D_ssfg1")

[node name="GameOverMenu" parent="." instance=ExtResource("8_bu3ac")]

[node name="MarginContainer" type="MarginContainer" parent="."]
offset_left = -120.0
offset_top = -148.0
offset_right = 29.0
offset_bottom = -99.0
scale = Vector2(0.3, 0.3)
script = ExtResource("9_bu3ac")

[node name="Label" type="Label" parent="MarginContainer"]
layout_mode = 2
theme = SubResource("Theme_5354r")
text = "Defeated Enemies: 
Placeable Towers:"
label_settings = SubResource("LabelSettings_dj26u")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("12_dj26u")
autoplay = true

[connection signal="timeout" from="map_holder/SpawnTimer" to="map_holder" method="_on_spawn_timer_timeout"]
[connection signal="area_entered" from="GameOverTrigger" to="map_holder" method="_on_game_over_trigger_area_entered"]
