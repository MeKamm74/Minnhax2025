[gd_scene load_steps=30 format=4 uid="uid://5coeftq8y7uo"]

[ext_resource type="Script" uid="uid://bluntvvp4ts82" path="res://map.gd" id="1_s02eq"]
[ext_resource type="Texture2D" uid="uid://biq6ihtg0jiwl" path="res://original_plains.png" id="3_yobqo"]
[ext_resource type="Texture2D" uid="uid://cfenxr7a4x3y7" path="res://original_mountains.png" id="5_dj26u"]
[ext_resource type="Texture2D" uid="uid://2f5wg0hptcb4" path="res://Sprites/SpawnCave.png" id="5_yobqo"]
[ext_resource type="Texture2D" uid="uid://bj6kji8hyfwnw" path="res://Sprites/jeffmmax1_png/JeffmMax-2.png" id="6_dj26u"]
[ext_resource type="PackedScene" uid="uid://bgnpjjtap6jfa" path="res://test_map_assets/enemy.tscn" id="6_r0pc2"]
[ext_resource type="PackedScene" uid="uid://defiek2tefue8" path="res://game_over_menu.tscn" id="8_bu3ac"]
[ext_resource type="PackedScene" uid="uid://bwk65i23xc5ad" path="res://pause_menu.tscn" id="8_gqtbx"]
[ext_resource type="Script" uid="uid://d3p15sv5lykwc" path="res://HUD.gd" id="9_bu3ac"]
[ext_resource type="AudioStream" uid="uid://bj5esjexlt6j0" path="res://Sound/Chickicha.mp3" id="9_ihcqn"]
[ext_resource type="AudioStream" uid="uid://myi4iesalyr6" path="res://Sound/Maow.mp3" id="10_7l7f8"]
[ext_resource type="AudioStream" uid="uid://dqq6mgj6jl8jd" path="res://Sound/DefendTheMax.mp3" id="12_dj26u"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_7l7f8"]
texture = ExtResource("3_yobqo")
separation = Vector2i(1, 1)
texture_region_size = Vector2i(24, 24)
4:0/0 = 0
3:0/0 = 0
2:0/0 = 0
1:0/0 = 0
0:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0

[sub_resource type="TileSet" id="TileSet_3qa0k"]
tile_size = Vector2i(24, 24)
sources/0 = SubResource("TileSetAtlasSource_7l7f8")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_dj26u"]
texture = ExtResource("3_yobqo")
separation = Vector2i(1, 1)
texture_region_size = Vector2i(24, 24)
4:0/0 = 0
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0

[sub_resource type="TileSet" id="TileSet_qgarv"]
tile_size = Vector2i(24, 24)
sources/2 = SubResource("TileSetAtlasSource_dj26u")

[sub_resource type="TileMapPattern" id="TileMapPattern_r0pc2"]
tile_data = PackedInt32Array(0, 0, 0, 65536, 0, 1)

[sub_resource type="TileMapPattern" id="TileMapPattern_ssfg1"]
tile_data = PackedInt32Array(0, 65536, 0, 65536, 65536, 1)

[sub_resource type="TileMapPattern" id="TileMapPattern_gqtbx"]
tile_data = PackedInt32Array(0, 131072, 0, 65536, 131072, 1)

[sub_resource type="TileMapPattern" id="TileMapPattern_bu3ac"]
tile_data = PackedInt32Array(0, 196608, 0, 65536, 196608, 1)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_3qa0k"]
texture = ExtResource("5_dj26u")
texture_region_size = Vector2i(24, 24)
0:0/0 = 0
0:0/0/custom_data_0 = true

[sub_resource type="TileSet" id="TileSet_yobqo"]
tile_size = Vector2i(24, 24)
custom_data_layer_0/name = "Obstacle"
custom_data_layer_0/type = 1
sources/1 = SubResource("TileSetAtlasSource_3qa0k")
pattern_0 = SubResource("TileMapPattern_r0pc2")
pattern_1 = SubResource("TileMapPattern_ssfg1")
pattern_2 = SubResource("TileMapPattern_gqtbx")
pattern_3 = SubResource("TileMapPattern_bu3ac")

[sub_resource type="TileMapPattern" id="TileMapPattern_t8dge"]
tile_data = PackedInt32Array(0, 2, 0, 65536, 2, 1)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_1wgsg"]
texture = ExtResource("5_yobqo")
texture_region_size = Vector2i(24, 24)
0:0/0 = 0
0:0/0/custom_data_1 = true

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_ihcqn"]
texture = ExtResource("6_dj26u")
texture_region_size = Vector2i(24, 24)
0:0/0 = 0
0:0/0/custom_data_0 = true

[sub_resource type="TileSet" id="TileSet_r0pc2"]
tile_size = Vector2i(24, 24)
custom_data_layer_0/name = "Base"
custom_data_layer_0/type = 1
custom_data_layer_1/name = "City"
custom_data_layer_1/type = 1
sources/0 = SubResource("TileSetAtlasSource_1wgsg")
sources/1 = SubResource("TileSetAtlasSource_ihcqn")
pattern_0 = SubResource("TileMapPattern_t8dge")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ssfg1"]

[sub_resource type="Theme" id="Theme_5354r"]

[sub_resource type="LabelSettings" id="LabelSettings_dj26u"]
font_size = 24
outline_size = 7
outline_color = Color(0, 0, 0, 1)

[node name="test_map" type="Node2D"]

[node name="map_holder" type="Node2D" parent="."]
script = ExtResource("1_s02eq")
enemy_scene = ExtResource("6_r0pc2")

[node name="background_layer" type="TileMapLayer" parent="map_holder"]
tile_map_data = PackedByteArray("AAD6/wEAAAABAAAAAAD6/wAAAAABAAAAAAD6////AAABAAAAAAD6//7/AAABAAAAAAD6//3/AAABAAAAAAD6//z/AAABAAAAAAD6//v/AAABAAAAAAD6//r/AAABAAAAAAD6//n/AAAAAAAAAAAKAPr/AAABAAAAAAAKAPv/AAABAAAAAAAKAPz/AAABAAAAAAAKAP3/AAABAAAAAAAKAP7/AAABAAAAAAAKAP//AAABAAAAAAAKAAAAAAABAAAAAAAKAAEAAAABAAAAAAAKAAIAAAAAAAAAAAD6/wIAAAAAAAAAAAD7/wIAAAAEAAEAAAD8/wIAAAAEAAEAAAD9/wIAAAAEAAEAAAD+/wIAAAAEAAEAAAD//wIAAAAEAAEAAAAAAAIAAAAEAAEAAAABAAIAAAAEAAEAAAACAAIAAAAEAAEAAAADAAIAAAAEAAEAAAAEAAIAAAAEAAEAAAAFAAIAAAAEAAEAAAAGAAIAAAAEAAEAAAAHAAIAAAAEAAEAAAAIAAIAAAAEAAEAAAAJAAIAAAAEAAEAAAD7//n/AAAEAAEAAAD8//n/AAAEAAEAAAD9//n/AAAEAAEAAAD+//n/AAAEAAEAAAD///n/AAAEAAEAAAAAAPn/AAAEAAEAAAABAPn/AAAEAAEAAAACAPn/AAAEAAEAAAADAPn/AAAEAAEAAAAEAPn/AAAEAAEAAAAFAPn/AAAEAAEAAAAGAPn/AAAEAAEAAAAHAPn/AAAEAAEAAAAIAPn/AAAEAAEAAAAJAPn/AAAEAAEAAAAKAPn/AAAAAAAAAAA=")
tile_set = SubResource("TileSet_3qa0k")

[node name="base_layer" type="TileMapLayer" parent="map_holder"]
texture_filter = 1
tile_map_data = PackedByteArray("AAAAAP//AgAAAAAAAAABAP7/AgADAAAAAAACAP3/AgAAAAAAAAACAP//AgAAAAAAAAADAP7/AgAAAAEAAAD///7/AgACAAEAAAAAAP7/AgADAAAAAAABAP3/AgAAAAAAAAADAP//AgACAAAAAAD/////AgAEAAEAAAAAAP3/AgAAAAAAAAACAP7/AgADAAAAAAAEAP3/AgAAAAAAAAAEAP7/AgABAAAAAAAEAP//AgAAAAAAAAADAP3/AgAAAAAAAAABAP//AgAAAAAAAAD///3/AgACAAAAAAD+/wAAAgAAAAAAAAAAAAEAAgAAAAAAAAABAAAAAgAEAAEAAAACAAEAAgABAAAAAAADAAAAAgAEAAEAAAAFAAAAAgAAAAAAAAAFAP//AgAAAAAAAAAGAP//AgAEAAEAAAAGAP3/AgACAAEAAAAHAP3/AgADAAAAAAAHAPv/AgAAAAAAAAAGAPv/AgACAAAAAAAFAPv/AgAAAAAAAAAEAPv/AgAAAAAAAAADAPv/AgAAAAAAAAAAAPv/AgAAAAAAAAD///v/AgACAAAAAAD+//v/AgAAAAAAAAD9//v/AgAAAAAAAAD8//v/AgAAAAAAAAD8//z/AgABAAAAAAD8//3/AgADAAAAAAD8//7/AgAAAAAAAAD8////AgAAAAEAAAD8/wAAAgACAAAAAAD8/wEAAgACAAAAAAD9/wEAAgABAAAAAAD+/wEAAgAAAAAAAAD//wEAAgAAAAAAAAABAAEAAgAAAAAAAAADAAEAAgAAAAAAAAAEAAEAAgAAAAAAAAAFAAEAAgAAAAAAAAAGAAEAAgAAAAAAAAAHAAEAAgAEAAEAAAAIAAEAAgAEAAEAAAAJAAEAAgAAAAAAAAAJAAAAAgAAAAAAAAAJAP//AgAAAAAAAAAJAP7/AgAAAAAAAAAJAP3/AgABAAEAAAAJAPz/AgACAAAAAAAJAPv/AgACAAAAAAAJAPr/AgACAAAAAAAIAPr/AgAAAAAAAAAHAPr/AgAAAAAAAAAGAPr/AgAAAAEAAAAFAPr/AgADAAAAAAAEAPr/AgADAAAAAAADAPr/AgADAAAAAAACAPr/AgADAAAAAAABAPr/AgADAAAAAAAAAPr/AgADAAAAAAD///r/AgAEAAAAAAD+//r/AgADAAAAAAD9//r/AgADAAAAAAD8//r/AgADAAAAAAD7//r/AgAEAAAAAAD7//v/AgACAAAAAAD7//z/AgAEAAEAAAD7//3/AgAEAAAAAAD7//7/AgACAAAAAAD7////AgACAAEAAAD7/wAAAgAAAAAAAAD7/wEAAgAAAAAAAAD9//z/AgAEAAEAAAD9//3/AgADAAAAAAD9//7/AgAAAAAAAAD9////AgABAAAAAAD9/wAAAgABAAAAAAD+////AgAEAAEAAAD+//7/AgAAAAAAAAD+//3/AgADAAAAAAD+//z/AgAAAAAAAAD///z/AgACAAAAAAAAAPz/AgAAAAAAAAABAPz/AgAAAAAAAAABAPv/AgAAAAAAAAACAPv/AgAAAAAAAAACAPz/AgAEAAEAAAADAPz/AgAEAAEAAAAEAPz/AgAAAAAAAAAFAPz/AgAAAAAAAAAFAP3/AgAAAAAAAAAFAP7/AgAAAAAAAAAGAP7/AgAAAAAAAAAHAP7/AgAAAAAAAAAHAPz/AgAAAAAAAAAGAPz/AgACAAAAAAAIAPz/AgAAAAAAAAAIAPv/AgAAAAAAAAAIAP3/AgADAAAAAAAIAP//AgAEAAEAAAAIAAAAAgAAAAAAAAAHAAAAAgAAAAAAAAAGAAAAAgAAAAAAAAAHAP//AgAEAAEAAAAIAP7/AgAAAAAAAAAEAAAAAgAEAAEAAAACAAAAAgABAAAAAAAAAAAAAgAAAAAAAAD//wAAAgAAAAAAAAA=")
tile_set = SubResource("TileSet_qgarv")

[node name="terrain_layer" type="TileMapLayer" parent="map_holder"]
texture_filter = 1
tile_map_data = PackedByteArray("AAAAAP//AQAAAAAAAAABAP//AQAAAAAAAAAEAP//AQAAAAAAAAACAP//AQAAAAAAAAD7/wEAAQAAAAAAAAAJAAEAAQAAAAAAAAAJAP7/AQAAAAAAAAAHAPz/AQAAAAAAAAADAPv/AQAAAAAAAAD9//7/AQAAAAAAAAD+/wEAAQAAAAAAAAAGAAEAAQAAAAAAAAAIAPv/AQAAAAAAAAAIAPz/AQAAAAAAAAAIAPr/AQAAAAAAAAAIAP7/AQAAAAAAAAAHAP7/AQAAAAAAAAAGAP7/AQAAAAAAAAAFAP3/AQAAAAAAAAAFAP7/AQAAAAAAAAAFAPz/AQAAAAAAAAAFAPv/AQAAAAAAAAAEAPv/AQAAAAAAAAACAPv/AQAAAAAAAAABAPv/AQAAAAAAAAAAAPv/AQAAAAAAAAD/////AQAAAAAAAAADAP3/AQAAAAAAAAACAP3/AQAAAAAAAAAAAPz/AQAAAAAAAAAAAP3/AQAAAAAAAAD+/wAAAQAAAAAAAAD+////AQAAAAAAAAD+//7/AQAAAAAAAAD8//7/AQAAAAAAAAD7/wIAAQAAAAAAAAD8/wIAAQAAAAAAAAD9/wIAAQAAAAAAAAD+/wIAAQAAAAAAAAD7//z/AQAAAAAAAAD8//z/AQAAAAAAAAD8//v/AQAAAAAAAAD9//v/AQAAAAAAAAD+//v/AQAAAAAAAAD+//z/AQAAAAAAAAD9//z/AQAAAAAAAAABAP3/AQAAAAAAAAAEAAAAAQAAAAAAAAAHAAEAAQAAAAAAAAAHAAAAAQAAAAAAAAAGAAAAAQAAAAAAAAABAPz/AQAAAAAAAAACAPz/AQAAAAAAAAAEAPz/AQAAAAAAAAADAPz/AQAAAAAAAAAEAP3/AQAAAAAAAAAEAP7/AQAAAAAAAAD9////AQAAAAAAAAD9/wEAAQAAAAAAAAD9/wAAAQAAAAAAAAD//wAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAACAAAAAQAAAAAAAAAFAP//AQAAAAAAAAAGAP//AQAAAAAAAAAHAP//AQAAAAAAAAAFAAAAAQAAAAAAAAAHAPv/AQAAAAAAAAAHAPr/AQAAAAAAAAD//wEAAQAAAAAAAAAAAAEAAQAAAAAAAAABAAEAAQAAAAAAAAACAAEAAQAAAAAAAAD7/wAAAQAAAAAAAAD//wIAAQAAAAAAAAAAAAIAAQAAAAAAAAABAAIAAQAAAAAAAAACAAIAAQAAAAAAAAA=")
tile_set = SubResource("TileSet_yobqo")

[node name="building_layer" type="TileMapLayer" parent="map_holder"]
texture_filter = 1
tile_map_data = PackedByteArray("AAAJAPr/AAAAAAAAAAADAP//AQAAAAAAAAD8/wEAAAAAAAAAAAD7//v/AAAAAAAAAAA=")
tile_set = SubResource("TileSet_r0pc2")

[node name="SpawnTimer" type="Timer" parent="map_holder"]
wait_time = 5.0
autostart = true

[node name="SpawnAudio" type="AudioStreamPlayer2D" parent="map_holder"]
stream = ExtResource("9_ihcqn")
volume_db = -6.0

[node name="DefeatedAudio" type="AudioStreamPlayer2D" parent="map_holder"]
stream = ExtResource("10_7l7f8")
volume_db = -6.0

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(60, -50)
zoom = Vector2(4.8, 4.8)

[node name="PauseMenu" parent="." instance=ExtResource("8_gqtbx")]

[node name="GameOverTrigger" type="Area2D" parent="."]
position = Vector2(84, -12)
scale = Vector2(0.66252536, 0.64901793)

[node name="CollisionShape2D" type="CollisionShape2D" parent="GameOverTrigger"]
visible = false
shape = SubResource("RectangleShape2D_ssfg1")

[node name="GameOverMenu" parent="." instance=ExtResource("8_bu3ac")]
offset_left = 58.0
offset_top = -39.0
offset_right = 58.0
offset_bottom = -39.0

[node name="HUD" type="MarginContainer" parent="."]
offset_left = -130.0
offset_top = -173.00002
offset_right = 273.3333
offset_bottom = 7.000046
scale = Vector2(0.26165763, 0.26165763)
script = ExtResource("9_bu3ac")

[node name="Label" type="Label" parent="HUD"]
layout_mode = 2
theme = SubResource("Theme_5354r")
text = "Defeated Enemies: 
Placeable Towers:"
label_settings = SubResource("LabelSettings_dj26u")

[node name="BackgroundMusic" type="AudioStreamPlayer" parent="."]
stream = ExtResource("12_dj26u")
volume_db = -1.0
autoplay = true

[connection signal="timeout" from="map_holder/SpawnTimer" to="map_holder" method="_on_spawn_timer_timeout"]
[connection signal="area_entered" from="GameOverTrigger" to="map_holder" method="_on_game_over_trigger_area_entered"]
